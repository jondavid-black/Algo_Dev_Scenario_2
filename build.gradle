task dockerBuild(type:Exec) {
  
    // set working dir to project root (i.e. current directory) [TODO this may not be robust]
    workingDir '.'  
    
    // craete the GAV for tagging the image layer
    def gav = group_id + '/' + artifact_id + ':' + sem_ver
    
    // run the docker build command
    executable 'docker'
    args = ['build', '-t', gav, '.']
    
}

task dockerTag(type:Exec) {

    // docker tag <initial_tag> <yourhubusername/artifact:version>
    def gav = group_id + '/' + artifact_id + ':' + sem_ver

    def tgt = 'blackjd/' + artifact_id + ':' + sem_ver

    executable 'docker'
    args = ['tag', gav, tgt]

}

task dockerPush(type:Exec) {

    // docker push <yourhubusername/artifact:version>
    def tgt = 'blackjd/' + artifact_id + ':' + sem_ver

    executable 'docker'
    args = ['push', tgt]

}